# CrashWebView

This is a project to demonstrate a WebView crash on FireTV:

1. Start the app
2. Click on any video item (for an example, the first one, 'Zeitgeist 2010_' but all of them link to the same video)
3. Wait a few seconds for the video to start and let it play ~10s
4. Press back to remove the webview from the screen
5. it should crash with the back trace below:


05-16 19:09:34.135 23969-23969/dailymotion.com.crashwebview E/MessageQueue-JNI: java.lang.NullPointerException: Attempt to invoke virtual method 'void android.view.View.dispatchDetachedFromWindow()' on a null object reference
        at android.view.ViewGroup.dispatchDetachedFromWindow(ViewGroup.java:2847)
        at android.view.ViewGroup.removeViewInternal(ViewGroup.java:4233)
        at android.view.ViewGroup.removeViewInternal(ViewGroup.java:4206)
        at android.view.ViewGroup.removeView(ViewGroup.java:4137)
        at dailymotion.com.crashwebview.MainFragment.onBackPressed(MainFragment.kt:215)
        at dailymotion.com.crashwebview.MainActivity.onBackPressed(MainActivity.kt:33)
        at android.app.Activity.onKeyUp(Activity.java:2472)
        at android.view.KeyEvent.dispatch(KeyEvent.java:2687)
        at android.app.Activity.dispatchKeyEvent(Activity.java:2723)
        at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:2320)
        at android.view.ViewRootImpl$ViewPostImeInputStage.processKeyEvent(ViewRootImpl.java:4088)
        at android.view.ViewRootImpl$ViewPostImeInputStage.onProcess(ViewRootImpl.java:4038)
        at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:3600)
        at android.view.ViewRootImpl$InputStage.onDeliverToNext(ViewRootImpl.java:3653)
        at android.view.ViewRootImpl$InputStage.forward(ViewRootImpl.java:3619)
        at android.view.ViewRootImpl$AsyncInputStage.forward(ViewRootImpl.java:3736)
        at android.view.ViewRootImpl$InputStage.apply(ViewRootImpl.java:3627)
        at android.view.ViewRootImpl$AsyncInputStage.apply(ViewRootImpl.java:3793)
        at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:3600)
        at android.view.ViewRootImpl$InputStage.onDeliverToNext(ViewRootImpl.java:3653)
        at android.view.ViewRootImpl$InputStage.forward(ViewRootImpl.java:3619)
        at android.view.ViewRootImpl$InputStage.apply(ViewRootImpl.java:3627)
        at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:3600)
        at android.view.ViewRootImpl$InputStage.onDeliverToNext(ViewRootImpl.java:3653)
        at android.view.ViewRootImpl$InputStage.forward(ViewRootImpl.java:3619)
        at android.view.ViewRootImpl$AsyncInputStage.forward(ViewRootImpl.java:3769)
        at android.view.ViewRootImpl$ImeInputStage.onFinishedInputEvent(ViewRootImpl.java:3930)
        at android.view.inputmethod.InputMethodManager$PendingEvent.run(InputMethodManager.java:2206)
        at android.view.inputmethod.InputMethodManager.invokeFinishedInputEventCallback(InputMethodManager.java:1849)
        at android.view.inputmethod.InputMethodManager.finishedInputEvent(InputMethodManager.java:1840)
        at android.view.inputmethod.InputMethodManager$ImeInputEventSender.onInputEventFinished(InputMethodManager.java:2183)
        at android.view.InputEventSender.dispatchInputEventFinished(InputEventSender.java:141)
        at android.os.MessageQueue.nativePollOnce(Native Method)
        at android.os.MessageQueue.next(MessageQueue.java:143)
        at android.os.Looper.loop(Looper.java:122)
        at android.app.ActivityThread.main(ActivityThread.java:5483)
        at java.lang.reflect.Method.invoke(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:372)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:984)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:779)
05-16 19:09:34.135 23969-23969/dailymotion.com.crashwebview D/AndroidRuntime: Shutting down VM
05-16 19:09:34.136 23969-23969/dailymotion.com.crashwebview E/AndroidRuntime: FATAL EXCEPTION: main
    Process: dailymotion.com.crashwebview, PID: 23969
    java.lang.NullPointerException: Attempt to invoke virtual method 'void android.view.View.dispatchDetachedFromWindow()' on a null object reference
        at android.view.ViewGroup.dispatchDetachedFromWindow(ViewGroup.java:2847)
        at android.view.ViewGroup.removeViewInternal(ViewGroup.java:4233)
        at android.view.ViewGroup.removeViewInternal(ViewGroup.java:4206)
        at android.view.ViewGroup.removeView(ViewGroup.java:4137)
        at dailymotion.com.crashwebview.MainFragment.onBackPressed(MainFragment.kt:215)
        at dailymotion.com.crashwebview.MainActivity.onBackPressed(MainActivity.kt:33)
        at android.app.Activity.onKeyUp(Activity.java:2472)
        at android.view.KeyEvent.dispatch(KeyEvent.java:2687)
        at android.app.Activity.dispatchKeyEvent(Activity.java:2723)
        at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:2320)
        at android.view.ViewRootImpl$ViewPostImeInputStage.processKeyEvent(ViewRootImpl.java:4088)
        at android.view.ViewRootImpl$ViewPostImeInputStage.onProcess(ViewRootImpl.java:4038)
        at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:3600)
        at android.view.ViewRootImpl$InputStage.onDeliverToNext(ViewRootImpl.java:3653)
        at android.view.ViewRootImpl$InputStage.forward(ViewRootImpl.java:3619)
        at android.view.ViewRootImpl$AsyncInputStage.forward(ViewRootImpl.java:3736)
        at android.view.ViewRootImpl$InputStage.apply(ViewRootImpl.java:3627)
        at android.view.ViewRootImpl$AsyncInputStage.apply(ViewRootImpl.java:3793)
        at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:3600)
        at android.view.ViewRootImpl$InputStage.onDeliverToNext(ViewRootImpl.java:3653)
        at android.view.ViewRootImpl$InputStage.forward(ViewRootImpl.java:3619)
        at android.view.ViewRootImpl$InputStage.apply(ViewRootImpl.java:3627)
        at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:3600)
        at android.view.ViewRootImpl$InputStage.onDeliverToNext(ViewRootImpl.java:3653)
        at android.view.ViewRootImpl$InputStage.forward(ViewRootImpl.java:3619)
        at android.view.ViewRootImpl$AsyncInputStage.forward(ViewRootImpl.java:3769)
        at android.view.ViewRootImpl$ImeInputStage.onFinishedInputEvent(ViewRootImpl.java:3930)
        at android.view.inputmethod.InputMethodManager$PendingEvent.run(InputMethodManager.java:2206)
        at android.view.inputmethod.InputMethodManager.invokeFinishedInputEventCallback(InputMethodManager.java:1849)
        at android.view.inputmethod.InputMethodManager.finishedInputEvent(InputMethodManager.java:1840)
        at android.view.inputmethod.InputMethodManager$ImeInputEventSender.onInputEventFinished(InputMethodManager.java:2183)
        at android.view.InputEventSender.dispatchInputEventFinished(InputEventSender.java:141)
        at android.os.MessageQueue.nativePollOnce(Native Method)
        at android.os.MessageQueue.next(MessageQueue.java:143)
        at android.os.Looper.loop(Looper.java:122)
        at android.app.ActivityThread.main(ActivityThread.java:5483)
        at java.lang.reflect.Method.invoke(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:372)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:984)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:779)
